/* empty css             *//* empty css                  *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                        *//* empty css                      *//* empty css                   *//* empty css                  *//* empty css                *//* empty css                     */import{at as R,d as $,a as r,r as ee,aa as ae,a7 as i,o as le,c as te,e,w as t,f as o,M as E,h as f,t as se,F as oe,K as j,k as ne,m as ue,aj as re,ak as ie,n as de,p as me,a5 as pe,al as ce,P as fe,am as ge,an as _e,ao as ve,ap as ye}from"./index-bc94ad6c.js";import{u as Ve}from"./setting-343fd123.js";const be=(p,k,n,g)=>R.get("/api/oms/returnReason/list",{params:{current:p,pageSize:k,name:n,status:g}}),A=p=>p.id?R.post("/api/oms/returnReason/update",p):R.post("/api/oms/returnReason/add",p),B=p=>R.post("/api/oms/returnReason/delete",p),Ce={style:{flex:"auto"}},Fe=$({__name:"index",setup(p){let k=Ve(),n=r(1),g=r(10),U=r(0),V=r([]),_=r(""),v=r(""),w=r([]),S=r([]);const F=s=>{S.value=s};let b=r(),d=r(!1),m=ee({id:0,name:"",status:""});ae(()=>{y()});const y=async(s=1)=>{n.value=s;let a=await be(n.value,g.value,_.value,v.value);a.code==200?(U.value=a.total,V.value=a.data,i({type:"success",message:a.message})):i({type:"error",message:a.message})},N=()=>{y()},O=()=>{k.refresh=!k.refresh},T=()=>{y(),_.value="",v.value=""},I=async s=>{w.value.push(s);const a={ids:w.value};let u=await B(a);u.code==200?(y(V.value.length>1?n.value:n.value-1),i({type:"success",message:u.message})):i({type:"error",message:u.message})},M=async()=>{w.value=S.value.map(u=>u.id);const s={ids:w.value};let a=await B(s);a.code===200?(y(V.value.length>1?n.value:n.value-1),i({type:"success",message:a.message})):i({type:"error",message:a.message})},H=s=>{d.value=!0,Object.assign(m,s),j(()=>{b.value.clearValidate("name"),b.value.clearValidate("status")})},K=()=>{d.value=!0,Object.assign(m,{id:0,name:"",status:""}),j(()=>{b.value.clearValidate("name"),b.value.clearValidate("status")})},L=()=>{d.value=!1},G=async()=>{let s=await A(m);s.code==200?(d.value=!1,i({type:"success",message:s.message}),y(V.value.length>1?n.value:n.value-1)):(d.value=!1,i({type:"error",message:s.message}))};let J=async s=>{let a={id:s.id,status:s.status},u=await A(a);u.code===200?i({type:"success",message:u.message}):i({type:"error",message:u.message})};return(s,a)=>{const u=ne,C=ue,x=re,q=ie,c=de,P=me,D=pe,h=ce,Q=fe,W=ge,X=_e,Y=ve,Z=ye;return le(),te(oe,null,[e(D,null,{default:t(()=>[e(P,{inline:!0},{default:t(()=>[e(C,{label:"名称:"},{default:t(()=>[e(u,{placeholder:"请输入搜索的用户名",modelValue:o(_),"onUpdate:modelValue":a[0]||(a[0]=l=>E(_)?_.value=l:_=l)},null,8,["modelValue"])]),_:1}),e(C,{label:"状态:"},{default:t(()=>[e(q,{modelValue:o(v),"onUpdate:modelValue":a[1]||(a[1]=l=>E(v)?v.value=l:v=l),class:"m-2",placeholder:"请选择状态"},{default:t(()=>[e(x,{label:"正常",value:"1"}),e(x,{label:"禁用",value:"0"})]),_:1},8,["modelValue"])]),_:1}),e(C,null,{default:t(()=>[e(c,{type:"primary",size:"default",onClick:T,disabled:!(o(_)||o(v))},{default:t(()=>[f(" 搜索 ")]),_:1},8,["disabled"]),e(c,{size:"default",onClick:O},{default:t(()=>[f("重置")]),_:1})]),_:1})]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(c,{type:"success",size:"default",onClick:K},{default:t(()=>[f(" 添加 ")]),_:1}),e(c,{type:"danger",size:"default",onClick:M,disabled:!o(S).length},{default:t(()=>[f(" 批量删除 ")]),_:1},8,["disabled"]),e(X,{border:"",data:o(V),onSelectionChange:F,style:{margin:"15px 0"}},{default:t(()=>[e(h,{type:"selection",align:"center",width:"40px"}),e(h,{label:"id",align:"center",prop:"id",width:"50px"}),e(h,{label:"名称",align:"center",prop:"name","show-overflow-tooltip":""}),e(h,{label:"状态",align:"center",prop:"status","show-overflow-tooltip":""},{default:t(({row:l})=>[e(Q,{modelValue:l.status,"onUpdate:modelValue":z=>l.status=z,class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#5597ce"},"active-value":"1","inactive-value":"0",onChange:z=>o(J)(l)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(h,{label:"操作",width:"300px",align:"center"},{default:t(({row:l})=>[e(c,{type:"primary",size:"small",icon:"Edit",onClick:z=>H(l)},{default:t(()=>[f(" 编辑 ")]),_:2},1032,["onClick"]),e(W,{title:`你确定删除${l.name}`,width:"260px",onConfirm:z=>I(l.id)},{reference:t(()=>[e(c,{type:"danger",size:"small",icon:"Delete"},{default:t(()=>[f(" 删除 ")]),_:1})]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),e(Y,{"current-page":o(n),"onUpdate:currentPage":a[2]||(a[2]=l=>E(n)?n.value=l:n=l),"page-size":o(g),"onUpdate:pageSize":a[3]||(a[3]=l=>E(g)?g.value=l:g=l),"page-sizes":[5,10,15,20],background:!0,layout:"prev, pager, next, jumper, -> , sizes, total",total:o(U),onCurrentChange:y,onSizeChange:N},null,8,["current-page","page-size","total"])]),_:1}),e(Z,{modelValue:o(d),"onUpdate:modelValue":a[6]||(a[6]=l=>E(d)?d.value=l:d=l),title:o(m).id?"更新":"添加"},{footer:t(()=>[se("div",Ce,[e(c,{onClick:L},{default:t(()=>[f("取消")]),_:1}),e(c,{type:"primary",onClick:G},{default:t(()=>[f("确定")]),_:1})])]),default:t(()=>[e(P,{model:o(m),ref_key:"formRef",ref:b},{default:t(()=>[e(C,{label:"名称",prop:"name"},{default:t(()=>[e(u,{placeholder:"请您输入名称",modelValue:o(m).name,"onUpdate:modelValue":a[4]||(a[4]=l=>o(m).name=l)},null,8,["modelValue"])]),_:1}),e(C,{label:"状态",prop:"status"},{default:t(()=>[e(q,{modelValue:o(m).status,"onUpdate:modelValue":a[5]||(a[5]=l=>o(m).status=l),class:"m-2",placeholder:"请选择状态"},{default:t(()=>[e(x,{label:"禁用",value:"0"}),e(x,{label:"正常",value:"1"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])],64)}}});export{Fe as default};
