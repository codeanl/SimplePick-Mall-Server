/* empty css             *//* empty css                     *//* empty css                        *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                  *//* empty css                *//* empty css                      *//* empty css                        *//* empty css                  *//* empty css                     */import{r as _e}from"./index-87349f12.js";import{at as P,d as fe,a as n,aa as ve,a7 as i,r as ye,o as E,c as I,t as f,e as t,w as s,F as O,B as be,f as o,C as we,x as he,h as p,M as h,z as Ce,H as xe,Z as ze,n as Ve,al as ke,P as Ee,an as Pe,ao as Se,a5 as je,ap as Ie,aj as Ue,ak as qe,m as Ne,ax as Be,p as Le,q as Ae,s as De,_ as Me}from"./index-bc94ad6c.js";import{r as Fe}from"./index-5d6ed19d.js";const He=(u,m,g)=>P.get("/api/sms/subjectProduct/list",{params:{current:u,pageSize:m,subjectId:g}}),Z=u=>P.post("/api/sms/subjectProduct/delete",u),Re=u=>P.post("/api/sms/subjectProduct/add",u),G=u=>P.post("/api/sms/subjectProduct/update",u),Te=u=>(Ae("data-v-d9816ae8"),u=u(),De(),u),Oe={class:"container"},Ze={class:"left"},Ge=Te(()=>f("h2",null,"专题列表",-1)),Je={key:0,class:"right"},Ke=["src"],Qe=["src"],We={style:{flex:"auto"}},Xe={style:{flex:"auto"}},Ye=fe({__name:"index",setup(u){let m=n(1),g=n(10),U=n(0),V=n([]),q=n([]),N=n([]),B=n([]),L=n([]),C=n(0);const J=n(null),K=n(null);let k=n([]),b=n(!1),_=n(!1);const A=a=>{k.value=a};ve(()=>{Q()});const Q=async()=>{let a=await _e(m.value,g.value,J.value,K.value);a.code==200&&(N.value=a.data,C.value=a.data[0].id,c())};let W=async a=>{C.value=a.id,c()},c=async()=>{let a=await He(m.value,g.value,C.value);a.code===200?(B.value=a.data,U.value=a.total,i({type:"success",message:a.message})):i({type:"error",message:a.message})};const X=()=>{c()};let x=n(1),z=n(5),D=n(0),Y=n(),S=n(),$=n(),j=async()=>{let a=await Fe(x.value,z.value,Y.value,$.value,S.value,S.value,S.value);a.code===200&&(L.value=a.data,D.value=a.total)};const ee=()=>{j()},te=async a=>{V.value.push(a);const l={ids:V.value};let r=await Z(l);r.code==200?(c(),i({type:"success",message:r.message})):i({type:"error",message:r.message})},ae=async()=>{V.value=k.value.map(r=>r.id);const a={ids:V.value};let l=await Z(a);l.code===200?(c(),i({type:"success",message:l.message})):i({type:"error",message:l.message})},le=async()=>{b.value=!0,j()},se=async()=>{q.value=k.value.map(r=>r.id);const a={subject_id:C.value,product_id:q.value,status:"1",sort:1};let l=await Re(a);l.code==200?(b.value=!1,c(),i({type:"success",message:l.message})):i({type:"error",message:l.message})};let oe=a=>{Object.assign(v,a),_.value=!0},v=ye({id:"",subject_id:"",product_id:"",status:"",sort:""});const ne=()=>{_.value=!1},re=async()=>{let a=await G(v);a.code==200?(_.value=!1,c(),i({type:"success",message:a.message})):(_.value=!1,c(),i({type:"error",message:a.message}))};let ue=async a=>{let l={id:a.id,status:a.status},r=await G(l);r.code===200?i({type:"success",message:r.message}):i({type:"error",message:r.message})};return(a,l)=>{const r=xe,de=ze,y=Ve,d=ke,ie=Ee,M=Pe,F=Se,ce=je,H=Ie,R=Ue,pe=qe,T=Ne,me=Be,ge=Le;return E(),I(O,null,[f("div",Oe,[f("div",Ze,[Ge,t(de,{"default-active":"1"},{default:s(()=>[(E(!0),I(O,null,be(o(N),(e,w)=>(E(),we(r,{index:w,onClick:$e=>o(W)(e),key:e},{default:s(()=>[f("span",null,he(e.name),1)]),_:2},1032,["index","onClick"]))),128))]),_:1})]),o(C)?(E(),I("div",Je,[t(ce,null,{default:s(()=>[t(y,{type:"success",size:"default",onClick:le},{default:s(()=>[p(" 添加 ")]),_:1}),t(y,{type:"danger",size:"default",onClick:ae,disabled:!o(k).length},{default:s(()=>[p(" 批量删除 ")]),_:1},8,["disabled"]),t(M,{border:"",data:o(B),onSelectionChange:A,style:{margin:"15px 0"}},{default:s(()=>[t(d,{type:"selection",align:"center",width:"40px"}),t(d,{label:"商品名称",align:"center",prop:"productInfo.name","show-overflow-tooltip":""}),t(d,{label:"商品图片",align:"center",prop:"productInfo.pic","show-overflow-tooltip":""},{default:s(({row:e})=>[f("img",{src:e.productInfo.pic,alt:"商品图片",style:{width:"80px"}},null,8,Ke)]),_:1}),t(d,{label:"排序",align:"center",prop:"sort","show-overflow-tooltip":""}),t(d,{label:"是否显示",align:"center",prop:"status","show-overflow-tooltip":"",width:"60px"},{default:s(({row:e})=>[t(ie,{modelValue:e.status,"onUpdate:modelValue":w=>e.status=w,class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#f06455"},"active-value":"1","inactive-value":"0",onChange:w=>o(ue)(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(d,{label:"操作",width:"300px",align:"center"},{default:s(({row:e})=>[t(y,{type:"primary",size:"small",icon:"Edit",onClick:w=>o(oe)(e)},{default:s(()=>[p(" 编辑 ")]),_:2},1032,["onClick"]),t(y,{type:"danger",size:"small",icon:"Edit",onClick:w=>te(e.id)},{default:s(()=>[p(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(F,{"current-page":o(m),"onUpdate:currentPage":l[0]||(l[0]=e=>h(m)?m.value=e:m=e),"page-size":o(g),"onUpdate:pageSize":l[1]||(l[1]=e=>h(g)?g.value=e:g=e),"page-sizes":[5,10,15,20],background:!0,layout:"prev, pager, next, jumper, -> , sizes, total",total:o(U),onCurrentChange:l[2]||(l[2]=e=>o(c)()),onSizeChange:X},null,8,["current-page","page-size","total"])]),_:1})])):Ce("",!0)]),t(H,{modelValue:o(b),"onUpdate:modelValue":l[6]||(l[6]=e=>h(b)?b.value=e:b=e),title:"添加"},{footer:s(()=>[f("div",We,[t(y,{type:"primary",onClick:se},{default:s(()=>[p("添加")]),_:1})])]),default:s(()=>[t(M,{border:"",data:o(L),onSelectionChange:A,style:{"margin-bottom":"15px"}},{default:s(()=>[t(d,{type:"selection",align:"center",width:"40px"}),t(d,{label:"id",align:"center",prop:"id",width:"50px"}),t(d,{label:"图片",align:"center",prop:"pic","show-overflow-tooltip":"",width:"120px"},{default:s(({row:e})=>[f("img",{src:e.pic,alt:"图片",style:{width:"100px",height:"auto"}},null,8,Qe)]),_:1}),t(d,{label:"名称",align:"center",prop:"name","show-overflow-tooltip":""}),t(d,{label:"货号",align:"center",prop:"productSn","show-overflow-tooltip":""}),t(d,{label:"销量",align:"center",prop:"sale","show-overflow-tooltip":""})]),_:1},8,["data"]),t(F,{"current-page":o(x),"onUpdate:currentPage":l[3]||(l[3]=e=>h(x)?x.value=e:x=e),"page-size":o(z),"onUpdate:pageSize":l[4]||(l[4]=e=>h(z)?z.value=e:z=e),"page-sizes":[5,10,15,20],background:!0,layout:"prev, pager, next, jumper, -> , sizes, total",total:o(D),onCurrentChange:l[5]||(l[5]=e=>o(j)()),onSizeChange:ee},null,8,["current-page","page-size","total"])]),_:1},8,["modelValue"]),t(H,{modelValue:o(_),"onUpdate:modelValue":l[9]||(l[9]=e=>h(_)?_.value=e:_=e),title:"编辑"},{footer:s(()=>[f("div",Xe,[t(y,{onClick:ne},{default:s(()=>[p("取消")]),_:1}),t(y,{type:"primary",onClick:re},{default:s(()=>[p("确定")]),_:1})])]),default:s(()=>[t(ge,{model:o(v)},{default:s(()=>[t(T,{label:" 状态",prop:"type"},{default:s(()=>[t(pe,{modelValue:o(v).status,"onUpdate:modelValue":l[7]||(l[7]=e=>o(v).status=e),class:"m-2",placeholder:"请选择状态"},{default:s(()=>[t(R,{label:"正常",value:"1"}),t(R,{label:"禁用",value:"0"})]),_:1},8,["modelValue"])]),_:1}),t(T,{label:"排序"},{default:s(()=>[p(" 排在第"),t(me,{modelValue:o(v).sort,"onUpdate:modelValue":l[8]||(l[8]=e=>o(v).sort=e),min:1,size:"small","controls-position":"right"},null,8,["modelValue"]),p("位 ")]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}});const ft=Me(Ye,[["__scopeId","data-v-d9816ae8"]]);export{ft as default};
