/* empty css             *//* empty css                  *//* empty css                             *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                        *//* empty css                *//* empty css                     */import{at as P,d as ie,a as _,aa as ue,a7 as T,b as de,o as u,c as pe,e as t,w as l,f as d,M as D,h as o,C as c,z as m,t as v,x as i,F as ce,k as me,m as fe,aj as _e,ak as ge,n as ye,p as ve,a5 as be,al as he,ah as xe,an as ke,ao as Se,aA as we,aB as ze,ad as Te,ae as Ee,ap as Ce,q as Ie,s as Ve,_ as De}from"./index-bc94ad6c.js";import{u as Ae}from"./setting-343fd123.js";const Ue=(y,B,E,h,S)=>P.get("/api/oms/order/list",{params:{current:y,pageSize:B,orderSn:E,memberUsername:h,status:S}}),K=y=>y.id?P.post("/api/oms/order/update",y):P.post("/api/oms/order/add",y),Ne=y=>P.post("/api/oms/order/info",y),Be=y=>(Ie("data-v-3652a83e"),y=y(),Ve(),y),qe={style:{color:"red"}},Fe={style:{color:"red"}},Me=Be(()=>v("h2",null,"商品信息",-1)),Oe=["src"],Pe={style:{color:"red"}},$e={style:{color:"red"}},Le={style:{color:"red"}},je=["src"],He=["src"],Je=ie({__name:"index",setup(y){let B=Ae();const E=_("");let h=_(1),S=_(10),j=_(0),H=_([]);const p=_(null),J=_([]),A=_(null),C=_(null);let w=_(""),z=_(""),I=_(""),U=_(!1);ue(()=>{q()});const q=async(n=1)=>{h.value=n;let s=await Ue(h.value,S.value,w.value,z.value,I.value);s.code==200?(j.value=s.total,H.value=s.data,T({type:"success",message:s.message})):T({type:"error",message:s.message})},Q=()=>{q()},X=()=>{q(),w.value="",z.value=""},ee=()=>{B.refresh=!B.refresh};let te=async n=>{U.value=!0;let s=await Ne({id:n.id});s.code===200?(p.value=s.data.orderInfo,J.value=s.data.skuList,A.value=s.data.placeInfo,C.value=s.data.merchantInfo,T({type:"success",message:s.message})):T({type:"error",message:s.message})},R=async n=>{let s={id:n.id,status:String(parseInt(n.status)+1)},b=await K(s);b.code===200?(T({type:"success",message:b.message}),window.location.reload()):T({type:"error",message:b.message})};const le=(()=>{const n=new Date,s=n.getFullYear(),b=String(n.getMonth()+1).padStart(2,"0"),V=String(n.getDate()).padStart(2,"0"),x=String(n.getHours()).padStart(2,"0"),L=String(n.getMinutes()).padStart(2,"0"),k=String(n.getSeconds()).padStart(2,"0");return`${s}-${b}-${V} ${x}:${L}:${k}`})();let ae=async n=>{let s={id:n.id,status:"2",deliveryTime:le};(await K(s)).code===200&&(T({type:"success",message:"修改成功"}),window.location.reload())},F=de(),$=_(!1),W=_(!1),oe=_(!1);for(let n=0;n<F.roles.length;n++)F.roles[n].includes("商家")&&($.value=!0),F.roles[n].includes("自提点")&&(W.value=!0),F.roles[n].includes("超级管理员")&&(oe.value=!0);return(n,s)=>{const b=me,V=fe,x=_e,L=ge,k=ye,Y=ve,Z=be,f=he,g=xe,G=ke,se=Se,M=we,ne=ze,r=Te,O=Ee,re=Ce;return u(),pe(ce,null,[t(Z,null,{default:l(()=>[t(Y,{inline:!0},{default:l(()=>[t(V,{label:"订单号:"},{default:l(()=>[t(b,{placeholder:"请输入搜索的用户名",modelValue:d(w),"onUpdate:modelValue":s[0]||(s[0]=a=>D(w)?w.value=a:w=a)},null,8,["modelValue"])]),_:1}),t(V,{label:"用户名:"},{default:l(()=>[t(b,{placeholder:"请输入搜索的用户名",modelValue:d(z),"onUpdate:modelValue":s[1]||(s[1]=a=>D(z)?z.value=a:z=a)},null,8,["modelValue"])]),_:1}),t(V,{label:"状态:"},{default:l(()=>[t(L,{modelValue:d(I),"onUpdate:modelValue":s[2]||(s[2]=a=>D(I)?I.value=a:I=a),class:"m-2",placeholder:"请选择状态"},{default:l(()=>[t(x,{label:"待付款",value:"0"}),t(x,{label:"待发货",value:"1"}),t(x,{label:"运输中",value:"2"}),t(x,{label:"待提货",value:"3"}),t(x,{label:"订单完成",value:"4"}),t(x,{label:"无效订单",value:"5"})]),_:1},8,["modelValue"])]),_:1}),t(V,null,{default:l(()=>[t(k,{type:"primary",size:"default",onClick:X,disabled:!(d(w).length||d(z).length||d(I).length)},{default:l(()=>[o(" 搜索 ")]),_:1},8,["disabled"]),t(k,{size:"default",onClick:ee},{default:l(()=>[o("重置")]),_:1})]),_:1})]),_:1})]),_:1}),t(Z,null,{default:l(()=>[t(G,{border:"",data:d(H),style:{margin:"15px 0"}},{default:l(()=>[t(f,{type:"selection",align:"center",width:"40px"}),t(f,{label:"id",align:"center",prop:"id",width:"50px"}),t(f,{label:"订单号",align:"center",prop:"orderSn","show-overflow-tooltip":""}),t(f,{label:"用户名",align:"center",prop:"memberUserName","show-overflow-tooltip":""}),t(f,{label:"支付方式",align:"center",prop:"payType","show-overflow-tooltip":""},{default:l(({row:a})=>[a.payType==="1"?(u(),c(g,{key:"item.label",class:"mx-1",type:"success",effect:"light"},{default:l(()=>[o(" 微信 ")]),_:1})):m("",!0),a.payType==="2"?(u(),c(g,{key:"item.label",class:"mx-1",type:"success",effect:"light"},{default:l(()=>[o(" 支付宝 ")]),_:1})):m("",!0)]),_:1}),t(f,{label:"订单类型",align:"center",prop:"orderType","show-overflow-tooltip":""},{default:l(({row:a})=>[a.orderType==="1"?(u(),c(g,{key:"item.label",class:"mx-1",type:"success",effect:"light"},{default:l(()=>[o(" 正常订单 ")]),_:1})):m("",!0),a.orderType==="2"?(u(),c(g,{key:"item.label",class:"mx-1",type:"danger",effect:"light"},{default:l(()=>[o(" 秒杀订单 ")]),_:1})):m("",!0)]),_:1}),t(f,{label:"用户信息",align:"center","show-overflow-tooltip":""},{default:l(({row:a})=>[v("span",null,i(a.receiverName+a.receiverPhone),1)]),_:1}),t(f,{label:"总金额",align:"center",prop:"totalAmount","show-overflow-tooltip":""},{default:l(({row:a})=>[v("p",qe,"¥"+i(a.totalAmount),1)]),_:1}),t(f,{label:"因付金额",align:"center",prop:"payAmount","show-overflow-tooltip":""},{default:l(({row:a})=>[v("p",Fe,"¥"+i(a.payAmount),1)]),_:1}),t(f,{label:"状态",align:"center",prop:"status","show-overflow-tooltip":""},{default:l(({row:a})=>[a.status==="0"?(u(),c(g,{key:"item.label",class:"mx-1",type:"danger",effect:"light"},{default:l(()=>[o(" 待付款 ")]),_:1})):m("",!0),a.status==="1"?(u(),c(g,{key:"item.label",class:"mx-1",type:"primary",effect:"light"},{default:l(()=>[o(" 待发货 ")]),_:1})):m("",!0),a.status==="2"?(u(),c(g,{key:"item.label",class:"mx-1",type:"Primary",effect:"light"},{default:l(()=>[o(" 运输中 ")]),_:1})):m("",!0),a.status==="3"?(u(),c(g,{key:"item.label",class:"mx-1",type:"Warning",effect:"light"},{default:l(()=>[o(" 待提货 ")]),_:1})):m("",!0),a.status==="4"?(u(),c(g,{key:"item.label",class:"mx-1",type:"success",effect:"light"},{default:l(()=>[o(" 订单完成 ")]),_:1})):m("",!0),a.status==="5"?(u(),c(g,{key:"item.label",class:"mx-1",type:"Info",effect:"light"},{default:l(()=>[o(" 无效订单 ")]),_:1})):m("",!0)]),_:1}),t(f,{label:"操作",width:"300px",align:"center"},{default:l(({row:a})=>[t(k,{type:"primary",size:"small",icon:"Edit",onClick:e=>d(te)(a)},{default:l(()=>[o(" 查看订单 ")]),_:2},1032,["onClick"]),a.status=="1"&&!d(W)?(u(),c(k,{key:0,type:"danger",size:"small",icon:"Edit",onClick:e=>d(ae)(a)},{default:l(()=>[o(" 订单发货 ")]),_:2},1032,["onClick"])):m("",!0),a.status=="2"&&!d($)?(u(),c(k,{key:1,type:"warning",size:"small",icon:"Edit",onClick:e=>d(R)(a)},{default:l(()=>[o(" 已到店 ")]),_:2},1032,["onClick"])):m("",!0),a.status=="3"&&!d($)?(u(),c(k,{key:2,type:"danger",size:"small",icon:"Edit",onClick:e=>d(R)(a)},{default:l(()=>[o(" 完成提货 ")]),_:2},1032,["onClick"])):m("",!0)]),_:1})]),_:1},8,["data"]),t(se,{"current-page":d(h),"onUpdate:currentPage":s[3]||(s[3]=a=>D(h)?h.value=a:h=a),"page-size":d(S),"onUpdate:pageSize":s[4]||(s[4]=a=>D(S)?S.value=a:S=a),"page-sizes":[5,10,15,20],background:!0,layout:"prev, pager, next, jumper, -> , sizes, total",total:d(j),onCurrentChange:q,onSizeChange:Q},null,8,["current-page","page-size","total"])]),_:1}),t(re,{modelValue:d(U),"onUpdate:modelValue":s[5]||(s[5]=a=>D(U)?U.value=a:U=a),title:"订单详情",width:"70%"},{default:l(()=>{var a;return[t(ne,{active:(a=p.value)==null?void 0:a.status,"align-center":"","finish-status":"success"},{default:l(()=>[t(M,{title:"支付订单",description:"Some description"}),t(M,{title:"运输中",description:"Some description"}),t(M,{title:"已到店",description:"Some description"}),t(M,{title:"订单完成",description:"Some description"})]),_:1},8,["active"]),Me,t(G,{data:J.value},{default:l(()=>[t(f,{label:"商品图片",align:"center",prop:"pic","show-overflow-tooltip":"",width:"120px"},{default:l(({row:e})=>[v("img",{src:e.pic,alt:"商品图片",style:{width:"100px",height:"auto"}},null,8,Oe)]),_:1}),t(f,{label:"货号",align:"center",prop:"skuSn","show-overflow-tooltip":""}),t(f,{label:"商品名称",align:"center",prop:"productName","show-overflow-tooltip":""}),t(f,{label:"规格",align:"center",prop:"tag","show-overflow-tooltip":"",width:"300px"}),t(f,{label:"价格",align:"center",prop:"price","show-overflow-tooltip":""},{default:l(({row:e})=>[v("p",Pe,"¥"+i(e.price),1)]),_:1})]),_:1},8,["data"]),t(O,{title:"订单详情",direction:"horizontal",column:1,size:E.value,border:"",style:{margin:"40px 0 0 20px"}},{default:l(()=>[t(r,{label:"订单号"},{default:l(()=>{var e;return[o(i((e=p.value)==null?void 0:e.orderSn),1)]}),_:1}),t(r,{label:"用户名"},{default:l(()=>{var e;return[o(i((e=p.value)==null?void 0:e.memberUserName),1)]}),_:1}),t(r,{label:"总金额"},{default:l(()=>{var e;return[v("p",$e,"¥"+i((e=p.value)==null?void 0:e.totalAmount),1)]}),_:1}),t(r,{label:"因付金额"},{default:l(()=>{var e;return[v("p",Le,"¥"+i((e=p.value)==null?void 0:e.payAmount),1)]}),_:1}),t(r,{label:"支付方式"},{default:l(()=>{var e,N;return[((e=p.value)==null?void 0:e.payType)=="1"?(u(),c(g,{key:0,class:"mx-1",effect:"success"},{default:l(()=>[o(" 微信 ")]),_:1})):m("",!0),((N=p.value)==null?void 0:N.payType)=="2"?(u(),c(g,{key:1,class:"mx-1",effect:"dark"},{default:l(()=>[o(" 支付宝 ")]),_:1})):m("",!0)]}),_:1}),t(r,{label:"订单类型"},{default:l(()=>{var e,N;return[((e=p.value)==null?void 0:e.orderType)=="1"?(u(),c(g,{key:0,class:"mx-1",effect:"success"},{default:l(()=>[o(" 正常订单 ")]),_:1})):m("",!0),((N=p.value)==null?void 0:N.orderType)=="2"?(u(),c(g,{key:1,class:"mx-1",type:"dark",effect:"dark"},{default:l(()=>[o(" 秒杀订单 ")]),_:1})):m("",!0)]}),_:1}),t(r,{label:"备注"},{default:l(()=>{var e;return[o(i((e=p.value)==null?void 0:e.note),1)]}),_:1}),t(r,{label:"支付时间"},{default:l(()=>{var e;return[o(i((e=p.value)==null?void 0:e.paymentTime),1)]}),_:1}),t(r,{label:"发货时间"},{default:l(()=>{var e;return[o(i((e=p.value)==null?void 0:e.deliveryTime),1)]}),_:1}),t(r,{label:"确认收货时间"},{default:l(()=>{var e;return[o(i((e=p.value)==null?void 0:e.receiveTime),1)]}),_:1}),t(r,{label:"评论时间"},{default:l(()=>{var e;return[o(i((e=p.value)==null?void 0:e.commentTime),1)]}),_:1})]),_:1},8,["size"]),t(O,{title:"收货人信息",direction:"horizontal",column:1,size:E.value,border:"",style:{margin:"40px 0 0 20px"}},{default:l(()=>[t(r,{label:"收货人"},{default:l(()=>{var e;return[o(i((e=p.value)==null?void 0:e.receiverName),1)]}),_:1}),t(r,{label:"联系电话"},{default:l(()=>{var e;return[o(i((e=p.value)==null?void 0:e.receiverPhone),1)]}),_:1})]),_:1},8,["size"]),t(O,{title:"商家信息",direction:"horizontal",column:1,size:E.value,border:"",style:{margin:"40px 0 0 20px"}},{default:l(()=>[t(r,{label:"自提点图片"},{default:l(()=>{var e;return[v("img",{src:(e=C.value)==null?void 0:e.pic,alt:"",style:{width:"200px"}},null,8,je)]}),_:1}),t(r,{label:"名称"},{default:l(()=>{var e;return[o(i((e=C.value)==null?void 0:e.name),1)]}),_:1}),t(r,{label:"详细地址"},{default:l(()=>{var e;return[o(i((e=C.value)==null?void 0:e.address),1)]}),_:1}),t(r,{label:"负责人"},{default:l(()=>{var e;return[o(i((e=C.value)==null?void 0:e.principal),1)]}),_:1}),t(r,{label:"联系电话"},{default:l(()=>{var e;return[o(i((e=C.value)==null?void 0:e.phone),1)]}),_:1})]),_:1},8,["size"]),t(O,{title:"自提点信息",direction:"horizontal",column:1,size:E.value,border:"",style:{margin:"40px 0 0 20px"}},{default:l(()=>[t(r,{label:"自提点图片"},{default:l(()=>{var e;return[v("img",{src:(e=A.value)==null?void 0:e.pic,alt:"",style:{width:"200px"}},null,8,He)]}),_:1}),t(r,{label:"名称"},{default:l(()=>{var e;return[o(i((e=A.value)==null?void 0:e.name),1)]}),_:1}),t(r,{label:"详细地址"},{default:l(()=>{var e;return[o(i((e=A.value)==null?void 0:e.place),1)]}),_:1}),t(r,{label:"联系电话"},{default:l(()=>{var e;return[o(i((e=A.value)==null?void 0:e.phone),1)]}),_:1})]),_:1},8,["size"])]}),_:1},8,["modelValue"])],64)}}});const nt=De(Je,[["__scopeId","data-v-3652a83e"]]);export{nt as default};
