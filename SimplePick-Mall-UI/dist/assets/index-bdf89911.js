/* empty css             *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                *//* empty css                        *//* empty css                  *//* empty css                      *//* empty css                   *//* empty css               */import{r as B,a as F,b as T}from"./index-b9f34230.js";import{d as U,a as p,r as z,aa as M,a7 as d,av as N,o as O,c as $,e,w as t,h as i,f as m,t as h,M as y,aw as j,F as L,n as P,al as H,am as S,an as W,a5 as G,k as J,m as K,p as Q,ap as X}from"./index-bc94ad6c.js";const Y={class:"dialog-footer"},ue=U({__name:"index",setup(Z){let v=p(),u=p([]),l=p(!1),c=p([]),n=z({id:0,name:"",parentID:0});M(()=>{f()});const f=async()=>{let a=await B();a.code===200?(u.value=a.data,d({type:"success",message:a.message})):d({type:"error",message:a.message})},b=N(()=>[{id:0,name:"无上级"},...u.value]),k=()=>{Object.assign(n,{name:"",parentID:0}),l.value=!0},V=a=>{l.value=!0,n.parentID=parseInt(a.parentID),Object.assign(n,a)},C=async()=>{l.value=!1;let a=await F(n);a.code===200?(l.value=!1,f(),d({type:"success",message:a.message})):d({type:"error",message:a.message})},E=async a=>{c.value.push(a);const o={ids:c.value};let r=await T(o);r.code==200?(c.value=[],f(),d({type:"success",message:r.message})):d({type:"error",message:r.message})};return(a,o)=>{const r=P,_=H,x=S,D=W,I=G,w=J,g=K,R=Q,q=X;return O(),$(L,null,[e(I,null,{default:t(()=>[e(r,{type:"success",size:"default",icon:"Plus",onClick:k},{default:t(()=>[i(" 添加 ")]),_:1}),e(D,{style:{margin:"15px 0"},"row-key":"id",border:"",data:m(u)},{default:t(()=>[e(_,{prop:"name",label:"名称"}),e(_,{label:"操作",width:"260px"},{default:t(({row:s})=>[e(r,{type:"primary",size:"small",onClick:A=>V(s)},{default:t(()=>[i(" 编辑 ")]),_:2},1032,["onClick"]),e(x,{title:`你确定要删除${s.name}?`,width:"260px",onConfirm:A=>E(s.id)},{reference:t(()=>[e(r,{type:"danger",size:"small"},{default:t(()=>[i(" 删除 ")]),_:1})]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"])]),_:1}),e(q,{modelValue:m(l),"onUpdate:modelValue":o[3]||(o[3]=s=>y(l)?l.value=s:l=s),title:m(n).id?"更新":"添加"},{footer:t(()=>[h("span",Y,[e(r,{onClick:o[2]||(o[2]=s=>y(l)?l.value=!1:l=!1)},{default:t(()=>[i("取消")]),_:1}),e(r,{type:"primary",onClick:C},{default:t(()=>[i("确定")]),_:1})])]),default:t(()=>[e(R,{ref_key:"formRef",ref:v},{default:t(()=>[e(g,{label:"名称"},{default:t(()=>[e(w,{placeholder:"请你输入菜单的名称",modelValue:m(n).name,"onUpdate:modelValue":o[0]||(o[0]=s=>m(n).name=s)},null,8,["modelValue"])]),_:1}),e(g,{label:"父级id"},{default:t(()=>[e(m(j),{modelValue:m(n).parentID,"onUpdate:modelValue":o[1]||(o[1]=s=>m(n).parentID=s),data:b.value,"check-strictly":"",props:{key:"id",label:"name"},"node-key":"id","render-after-expand":!1},null,8,["modelValue","data"])]),_:1})]),_:1},512)]),_:1},8,["modelValue","title"])],64)}}});export{ue as default};
