/* empty css             *//* empty css                  *//* empty css                     *//* empty css                        *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                *//* empty css                        *//* empty css                      *//* empty css                   */import{at as g,d as h,a as _,r as I,aa as S,a7 as c,av as H,o as y,c as W,e,w as a,h as m,f as s,C as x,z as C,t as G,M as N,aw as J,F as K,n as L,al as Q,ah as X,am as Y,an as Z,a5 as ee,k as le,m as ae,aj as te,ak as oe,ax as se,p as ne,ap as re}from"./index-bc94ad6c.js";const me=()=>g.post("/api/sys/menu/list"),ue=i=>i.id?g.post("/api/sys/menu/update",i):g.post("/api/sys/menu/add",i),de=i=>g.post("/api/sys/menu/delete",i),pe={class:"dialog-footer"},Ie=h({__name:"index",setup(i){let b=_([]),r=_(!1),V=_([]),o=I({name:"",url:"",tag:"",orderNum:0,remark:"",parentId:0,type:""});S(()=>{k()});const k=async()=>{let n=await me();n.code===200?(b.value=n.data,c({type:"success",message:n.message})):c({type:"error",message:n.message})},U=H(()=>[{id:0,name:"无上级"},...b.value]),P=()=>{Object.assign(o,{id:0,name:"",url:"",tag:"",parentId:0,orderNum:0,remark:"",type:""}),r.value=!0},w=n=>{r.value=!0,o.parentId=parseInt(n.parentId),Object.assign(o,n)},M=async()=>{r.value=!1;let n=await ue(o);n.code===200?(r.value=!1,k(),c({type:"success",message:n.message})):c({type:"error",message:n.message})},q=async n=>{V.value.push(n);const t={ids:V.value};let u=await de(t);u.code==200?(V.value=[],k(),c({type:"success",message:u.message})):c({type:"error",message:u.message})};let z=_();const B=I({});return(n,t)=>{const u=L,d=Q,v=X,T=Y,A=Z,F=ee,f=le,p=ae,E=te,O=oe,j=se,D=ne,R=re;return y(),W(K,null,[e(F,null,{default:a(()=>[e(u,{type:"success",size:"default",icon:"Plus",onClick:P},{default:a(()=>[m(" 添加菜单 ")]),_:1}),e(A,{style:{margin:"20px 0"},"row-key":"id",border:"",data:s(b)},{default:a(()=>[e(d,{prop:"name",label:"名称"}),e(d,{label:"类型",align:"center",prop:"type","show-overflow-tooltip":""},{default:a(({row:l})=>[l.type==="1"?(y(),x(v,{key:"item.label",class:"mx-1",type:"success",effect:"light"},{default:a(()=>[m(" 目录 ")]),_:1})):C("",!0),l.type==="2"?(y(),x(v,{key:"item.label",class:"mx-1",type:"danger",effect:"light"},{default:a(()=>[m(" 菜单 ")]),_:1})):C("",!0),l.type==="3"?(y(),x(v,{key:"item.label",class:"mx-1",type:"warning",effect:"light"},{default:a(()=>[m(" 按钮 ")]),_:1})):C("",!0)]),_:1}),e(d,{prop:"url",label:"路径"}),e(d,{prop:"tag",label:"标识"}),e(d,{prop:"orderNum",label:"排序"}),e(d,{prop:"remark",label:"备注"}),e(d,{label:"操作",width:"260px"},{default:a(({row:l})=>[e(u,{type:"primary",size:"small",onClick:$=>w(l)},{default:a(()=>[m(" 编辑 ")]),_:2},1032,["onClick"]),e(T,{title:`你确定要删除${l.name}?`,width:"260px",onConfirm:$=>q(l.id)},{reference:a(()=>[e(u,{type:"danger",size:"small"},{default:a(()=>[m(" 删除 ")]),_:1})]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"])]),_:1}),e(R,{modelValue:s(r),"onUpdate:modelValue":t[8]||(t[8]=l=>N(r)?r.value=l:r=l),title:s(o).id?"更新":"添加"},{footer:a(()=>[G("span",pe,[e(u,{onClick:t[7]||(t[7]=l=>N(r)?r.value=!1:r=!1)},{default:a(()=>[m("取消")]),_:1}),e(u,{type:"primary",onClick:M},{default:a(()=>[m("确定")]),_:1})])]),default:a(()=>[e(D,{rules:B,ref_key:"form",ref:z},{default:a(()=>[e(p,{label:"名称",prop:"name"},{default:a(()=>[e(f,{placeholder:"请你输入菜单的名称",modelValue:s(o).name,"onUpdate:modelValue":t[0]||(t[0]=l=>s(o).name=l)},null,8,["modelValue"])]),_:1}),e(p,{label:"类型"},{default:a(()=>[e(O,{modelValue:s(o).type,"onUpdate:modelValue":t[1]||(t[1]=l=>s(o).type=l),class:"m-2",placeholder:"请选择类型"},{default:a(()=>[e(E,{label:"目录",value:"1"}),e(E,{label:"菜单",value:"2"}),e(E,{label:"按钮",value:"3"})]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"父级id"},{default:a(()=>[e(s(J),{modelValue:s(o).parentId,"onUpdate:modelValue":t[2]||(t[2]=l=>s(o).parentId=l),data:U.value,"check-strictly":"",props:{key:"id",label:"name"},"node-key":"id","render-after-expand":!1},null,8,["modelValue","data"])]),_:1}),e(p,{label:"路径"},{default:a(()=>[e(f,{placeholder:"请你输入路径",modelValue:s(o).url,"onUpdate:modelValue":t[3]||(t[3]=l=>s(o).url=l)},null,8,["modelValue"])]),_:1}),e(p,{label:"排序"},{default:a(()=>[m(" 该菜单排在第"),e(j,{modelValue:s(o).orderNum,"onUpdate:modelValue":t[4]||(t[4]=l=>s(o).orderNum=l),min:1,size:"small","controls-position":"right"},null,8,["modelValue"]),m("位 ")]),_:1}),e(p,{label:"标识"},{default:a(()=>[e(f,{placeholder:"请你输入标识",modelValue:s(o).tag,"onUpdate:modelValue":t[5]||(t[5]=l=>s(o).tag=l)},null,8,["modelValue"])]),_:1}),e(p,{label:"备注"},{default:a(()=>[e(f,{placeholder:"请你输入备注",modelValue:s(o).remark,"onUpdate:modelValue":t[6]||(t[6]=l=>s(o).remark=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["rules"])]),_:1},8,["modelValue","title"])],64)}}});export{Ie as default};
