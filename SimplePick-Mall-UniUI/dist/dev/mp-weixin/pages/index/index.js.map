{"version":3,"file":"index.js","sources":["../../../../../src/pages/index/index.vue","../../../../../uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<script setup lang=\"ts\">\nimport CustomNavbar from './components/CustomNavbar.vue'\nimport CategoryPanel from './components/CategoryPanel.vue'\nimport HotPanel from './components/HotPanel.vue'\nimport Swiper from '../../components/Swiper.vue'\nimport Guess from '../../components/Guess.vue'\nimport { getHomeBannerAPI, getHomeCategoryAPI, getHomeHotAPI } from '@/services/home'\nimport { onLoad } from '@dcloudio/uni-app'\nimport { ref } from 'vue'\n\n// 获取轮播图数据\nconst bannerList = ref<any[]>([])\nconst getHomeBannerData = async () => {\n  const res = await getHomeBannerAPI()\n  bannerList.value = res.data\n}\n\n// 获取前台分类数据\nconst categoryList = ref<any[]>([])\nconst getHomeCategoryData = async () => {\n  const res = await getHomeCategoryAPI()\n  categoryList.value = res.data\n}\n\n// 获取热门推荐数据\nconst hotList = ref<any[]>([])\nconst getHomeHotData = async () => {\n  const res = await getHomeHotAPI()\n  hotList.value = res.data\n}\n// 页面加载\nonLoad(async () => {\n  await Promise.all([getHomeBannerData(), getHomeCategoryData(), getHomeHotData()])\n})\nimport { useGuessList } from '@/composables'\n// 猜你喜欢组合式函数调用\nconst { guessRef, onScrolltolower } = useGuessList()\n// 当前下拉刷新状态\nconst isTriggered = ref(false)\n// 自定义下拉刷新被触发\nconst onRefresherrefresh = async () => {\n  // 开始动画\n  isTriggered.value = true\n  // 加载数据\n  // await getHomeBannerData()\n  // await getHomeCategoryData()\n  // await getHomeHotData()\n  // 重置猜你喜欢组件数据\n  guessRef.value?.resetData()\n  await Promise.all([\n    getHomeBannerData(),\n    getHomeCategoryData(),\n    getHomeHotData(),\n    guessRef.value?.getMore(),\n  ])\n  // 关闭动画\n  isTriggered.value = false\n}\n</script>\n\n<template>\n  <view class=\"viewport\">\n    <!-- 自定义导航栏 -->\n    <CustomNavbar />\n    <!-- 滚动容器 -->\n    <scroll-view\n      enable-back-to-top\n      refresher-enabled\n      @refresherrefresh=\"onRefresherrefresh\"\n      :refresher-triggered=\"isTriggered\"\n      @scrolltolower=\"onScrolltolower\"\n      class=\"scroll-view\"\n      scroll-y\n    >\n      <template>\n        <!-- 自定义轮播图 -->\n        <Swiper :list=\"bannerList\" />\n        <!-- 分类面板 -->\n        <CategoryPanel :list=\"categoryList\" />\n        <!-- 热门推荐 -->\n        <HotPanel :list=\"hotList\" />\n        <!-- 猜你喜欢 -->\n        <Guess ref=\"guessRef\" />\n      </template>\n    </scroll-view>\n  </view>\n</template>\n\n<style lang=\"scss\">\npage {\n  //background-color: #f7f7f7;\n  background-color: #f7f7f7;\n  height: 100%;\n  overflow: hidden;\n}\n\n.viewport {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.scroll-view {\n  flex: 1;\n  overflow: hidden;\n}\n</style>\n","import MiniProgramPage from '/Users/gygy/Desktop/毕业设计/SimplePick-Mall-UniUI/src/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getHomeBannerAPI","getHomeCategoryAPI","getHomeHotAPI","onLoad","useGuessList"],"mappings":";;;;;;;;;;AACA,MAAA,eAAyB,MAAA;AACzB,MAAA,gBAA0B,MAAA;AAC1B,MAAA,WAAqB,MAAA;AACrB,MAAA,SAAmB,MAAA;AACnB,MAAA,QAAkB,MAAA;;;;AAMZ,UAAA,aAAaA,kBAAW,CAAA,CAAE;AAChC,UAAM,oBAAoB,YAAY;AAC9B,YAAA,MAAM,MAAMC,cAAAA;AAClB,iBAAW,QAAQ,IAAI;AAAA,IAAA;AAInB,UAAA,eAAeD,kBAAW,CAAA,CAAE;AAClC,UAAM,sBAAsB,YAAY;AAChC,YAAA,MAAM,MAAME,cAAAA;AAClB,mBAAa,QAAQ,IAAI;AAAA,IAAA;AAIrB,UAAA,UAAUF,kBAAW,CAAA,CAAE;AAC7B,UAAM,iBAAiB,YAAY;AAC3B,YAAA,MAAM,MAAMG,cAAAA;AAClB,cAAQ,QAAQ,IAAI;AAAA,IAAA;AAGtBC,kBAAAA,OAAO,YAAY;AACX,YAAA,QAAQ,IAAI,CAAC,kBAAA,GAAqB,uBAAuB,eAAgB,CAAA,CAAC;AAAA,IAAA,CACjF;AAGD,UAAM,EAAE,UAAU,gBAAgB,IAAIC,kBAAa,aAAA;AAE7C,UAAA,cAAcL,kBAAI,KAAK;AAE7B,UAAM,qBAAqB,YAAY;;AAErC,kBAAY,QAAQ;AAMpB,qBAAS,UAAT,mBAAgB;AAChB,YAAM,QAAQ,IAAI;AAAA,QAChB,kBAAkB;AAAA,QAClB,oBAAoB;AAAA,QACpB,eAAe;AAAA,SACf,cAAS,UAAT,mBAAgB;AAAA,MAAQ,CACzB;AAED,kBAAY,QAAQ;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;ACvDtB,GAAG,WAAW,eAAe;"}