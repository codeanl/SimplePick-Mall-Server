{"version":3,"file":"index.js","sources":["../../../../../src/pages/returnApply/index.vue","../../../../../uniPage:/cGFnZXMvcmV0dXJuQXBwbHkvaW5kZXgudnVl"],"sourcesContent":["<template>\n  <!-- 商品信息 -->\n  <view class=\"goods\">\n    <view class=\"item\">\n      <navigator class=\"navigator\" v-for=\"item in order?.skuList\" :key=\"item.id\"\n        :url=\"`/pages/goods/goods?id=${item.spuId}`\" hover-class=\"none\">\n        <image class=\"cover\" :src=\"item.pic\"></image>\n        <view class=\"meta\">\n          <view class=\"name ellipsis\">{{ item.name }}</view>\n          <view class=\"type\">{{ item.tag }}</view>\n          <view class=\"price\">\n            <view class=\"actual\">\n              <text class=\"symbol\">¥</text>\n              <text>{{ item.price }}</text>\n            </view>\n          </view>\n          <view class=\"quantity\">x{{ item.count }}</view>\n        </view>\n      </navigator>\n    </view>\n  </view>\n  <!-- 用户信息 -->\n  <view class=\"related\">\n    <view class=\"item\">\n      <text class=\"text\">退货原因</text>\n      <view @tap=\"popup?.open?.()\">{{ place ? place.name : \"请填写退货原因\" }} </view>\n    </view>\n    <view class=\"item\">\n      <text class=\"text\">描述</text>\n      <input class=\"input\" :cursor-spacing=\"30\" placeholder=\"请填写描述\" v-model=\"description\" />\n    </view>\n    <view class=\"item\">\n      <text class=\"text\">退货金额</text>\n      <text class=\"account placeholder\">¥1887</text>\n    </view>\n    <view class=\"item\">\n      <text class=\"text\">凭证</text>\n    </view>\n    <!-- <view>\n      <uni-file-picker limit=\"1\" title=\"请上传凭证\" @select=\"upload\"></uni-file-picker>\n    </view> -->\n    <view @tap=\"onAvatarChange\">\n      <image class=\"pz\" :src=\"pz\" mode=\"aspectFill\" />\n    </view>\n  </view>\n  <!--  -->\n  <view class=\"toolbar\" :style=\"{ paddingBottom: safeAreaInsets?.bottom + 'px' }\">\n    <view class=\"button delete\" @click=\"limit11\"> 提交 </view>\n  </view>\n  <!--  -->\n  <uni-popup ref=\"popup\" type=\"bottom\" background-color=\"#fff\">\n    <view class=\"popup-root\">\n      <view class=\"title\">退货原因</view>\n      <view class=\"description\">\n        <view class=\"tips\">请选退货原因：</view>\n        <!-- @tap=\"reason = item\" -->\n        <view class=\"cell\" v-for=\" item  in  reasonList \" :key=\"item\" @click=\"ddd(item)\">\n          <text class=\"text\">{{ item.name }}</text>\n          <text class=\"icon\" :class=\"{ checked: item === reason }\"></text>\n        </view>\n      </view>\n      <view class=\"footer\">\n        <view class=\"button primary\" @tap=\"popup?.close?.(), dddd\">确认</view>\n      </view>\n    </view>\n  </uni-popup>\n</template>\n\n<script lang=\"ts\" setup>\nimport { ref } from 'vue'\nimport { onLoad } from '@dcloudio/uni-app'\nimport { orderInfo } from '@/services/order'\nconst popup = ref<UniHelper.UniPopupInstance>()\nlet reason = ref('')\nconst description = ref('')\nconst proofPics = ref('')\nonLoad(() => {\n  getData()\n})\n// 获取页面参数\nconst query = defineProps<{\n  id: number\n}>()\n// 获取屏幕边界到安全区域距离\nconst { safeAreaInsets } = uni.getSystemInfoSync()\nimport { listreturnReason, addreturnApply, returnApplyInfo } from '@/services/return'\nconst reasonList = ref<any>()\nconst order = ref<any>()\nconst getData = async () => {\n  const res = await listreturnReason({})\n  if (res.code === 200) {\n    reasonList.value = res.data\n  }\n  const res1 = await orderInfo({ id: parseInt(query.id) })\n  if (res1.code === 200) {\n    order.value = res1.data\n  }\n\n}\n\nlet place = ref<any>()\nlet ddd = (item: any) => {\n  reason.value = item\n  place.value = item\n}\n\nlet dddd = () => {\n  console.log(place);\n}\n\nimport { useMemberStore } from '@/stores'\nconst memberStore = useMemberStore()\nlet pz = ref('')\nlet limit11 = async () => {\n  let res = await addreturnApply({\n    userID: memberStore?.profile.info.id,\n    orderID: order.value.orderInfo.id,\n    returnReasonID: place.value.id,\n    status: '0',\n    description: description.value,\n    proofPics: pz.value,\n    returnAmount: order.value.orderInfo.totalAmount,\n  })\n  if (res.code == 200) {\n    uni.redirectTo({ url: `/pages/detail/index?id=${parseInt(query.id)}` })\n  }\n}\n\n// \nconst onAvatarChange = () => {\n  uni.chooseMedia({\n    // 文件个数\n    count: 1,\n    // 文件类型\n    mediaType: ['image'],\n    success: (res) => {\n      // 本地路径\n      const { tempFilePath } = res.tempFiles[0]\n      // 上传\n      uploadFile(tempFilePath)\n    },\n  })\n}\nconst uploadFile = (file: string) => {\n  uni.uploadFile({\n    url: '/api/upload',\n    name: 'file',\n    filePath: file,\n    success: (res: any) => {\n      pz.value = JSON.parse(res.data).data\n      console.log(pz.value);\n    },\n  })\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n.goods {\n  margin: 20rpx 20rpx 0;\n  padding: 0 20rpx;\n  border-radius: 10rpx;\n  background-color: #fff;\n\n  .pz {\n    width: 200rpx;\n    height: 200rpx;\n    background-color: #e4dddd;\n  }\n\n  .item {\n    padding: 30rpx 0;\n    border-bottom: 1rpx solid #eee;\n\n    .navigator {\n      display: flex;\n      margin: 20rpx 0;\n    }\n\n    .cover {\n      width: 170rpx;\n      height: 170rpx;\n      border-radius: 10rpx;\n      margin-right: 20rpx;\n    }\n\n    .meta {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      position: relative;\n    }\n\n    .name {\n      height: 80rpx;\n      font-size: 26rpx;\n      color: #444;\n    }\n\n    .type {\n      line-height: 1.8;\n      padding: 0 15rpx;\n      margin-top: 6rpx;\n      font-size: 24rpx;\n      align-self: flex-start;\n      border-radius: 4rpx;\n      color: #888;\n      background-color: #f7f7f8;\n    }\n\n    .price {\n      display: flex;\n      margin-top: 6rpx;\n      font-size: 24rpx;\n    }\n\n    .symbol {\n      font-size: 20rpx;\n    }\n\n    .original {\n      color: #999;\n      text-decoration: line-through;\n    }\n\n    .actual {\n      margin-left: 10rpx;\n      color: #444;\n    }\n\n    .text {\n      font-size: 22rpx;\n    }\n\n    .quantity {\n      position: absolute;\n      bottom: 0;\n      right: 0;\n      font-size: 24rpx;\n      color: #444;\n    }\n\n    .action {\n      display: flex;\n      flex-direction: row-reverse;\n      justify-content: flex-start;\n      padding: 30rpx 0 0;\n\n      .button {\n        width: 200rpx;\n        height: 60rpx;\n        text-align: center;\n        justify-content: center;\n        line-height: 60rpx;\n        margin-left: 20rpx;\n        border-radius: 60rpx;\n        border: 1rpx solid #ccc;\n        font-size: 26rpx;\n        color: #444;\n      }\n\n      .primary {\n        color: #27ba9b;\n        border-color: #27ba9b;\n      }\n    }\n  }\n}\n\n//\n.related {\n  margin: 20rpx;\n  padding: 0 20rpx;\n  border-radius: 10rpx;\n  background-color: #fff;\n\n  .pz {\n    width: 300rpx;\n    height: 300rpx;\n    background-color: #f5f5f5;\n  }\n\n  .item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    min-height: 80rpx;\n    font-size: 26rpx;\n    color: #333;\n  }\n\n  .input {\n    flex: 1;\n    text-align: right;\n    margin: 20rpx 0;\n    padding-right: 20rpx;\n    font-size: 26rpx;\n    color: #999;\n  }\n\n  .item .text {\n    width: 125rpx;\n  }\n\n  .picker {\n    color: #666;\n  }\n\n  .picker::after {\n    content: '\\e6c2';\n  }\n}\n\n.popup-root {\n  padding: 30rpx 30rpx 0;\n  border-radius: 10rpx 10rpx 0 0;\n  overflow: hidden;\n\n  .title {\n    font-size: 30rpx;\n    text-align: center;\n    margin-bottom: 30rpx;\n  }\n\n  .description {\n    font-size: 28rpx;\n    padding: 0 20rpx;\n\n    .tips {\n      color: #444;\n      margin-bottom: 12rpx;\n    }\n\n    .cell {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 15rpx 0;\n      color: #666;\n    }\n\n    .icon::before {\n      content: '\\e6cd';\n      font-family: 'erabbit' !important;\n      font-size: 38rpx;\n      color: #999;\n    }\n\n    .icon.checked::before {\n      content: '\\e6cc';\n      font-size: 38rpx;\n      color: #27ba9b;\n    }\n  }\n\n  .footer {\n    display: flex;\n    justify-content: space-between;\n    padding: 30rpx 0 40rpx;\n    font-size: 28rpx;\n    color: #444;\n\n    .button {\n      flex: 1;\n      height: 72rpx;\n      text-align: center;\n      line-height: 72rpx;\n      margin: 0 20rpx;\n      color: #444;\n      border-radius: 72rpx;\n      border: 1rpx solid #ccc;\n    }\n\n    .primary {\n      color: #fff;\n      background-color: #27ba9b;\n      border: none;\n    }\n  }\n}\n\n.toolbar {\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: calc(var(--window-bottom));\n  z-index: 1;\n\n  height: 100rpx;\n  padding: 0 20rpx;\n  display: flex;\n  align-items: center;\n  flex-direction: row-reverse;\n  border-top: 1rpx solid #ededed;\n  border-bottom: 1rpx solid #ededed;\n  background-color: #fff;\n  box-sizing: content-box;\n\n  .button {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    width: 200rpx;\n    height: 72rpx;\n    margin-left: 15rpx;\n    font-size: 26rpx;\n    border-radius: 72rpx;\n    border: 1rpx solid #ccc;\n    color: #444;\n  }\n\n  .delete {\n    order: 4;\n  }\n\n  .button {\n    order: 3;\n  }\n\n  .secondary {\n    order: 2;\n    color: #27ba9b;\n    border-color: #27ba9b;\n  }\n\n  .primary {\n    order: 1;\n    color: #fff;\n    background-color: #27ba9b;\n  }\n}\n</style>","import MiniProgramPage from '/Users/gygy/Desktop/毕业设计/SimplePick-Mall-UniUI/src/pages/returnApply/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onLoad","uni","listreturnReason","orderInfo","useMemberStore","addreturnApply"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAwEA,UAAM,QAAQA,cAAAA;AACV,QAAA,SAASA,kBAAI,EAAE;AACb,UAAA,cAAcA,kBAAI,EAAE;AACRA,kBAAAA,IAAI,EAAE;AACxBC,kBAAAA,OAAO,MAAM;AACH;IAAA,CACT;AAMD,UAAM,EAAE,eAAA,IAAmBC,cAAA,MAAI,kBAAkB;AAEjD,UAAM,aAAaF,cAAAA;AACnB,UAAM,QAAQA,cAAAA;AACd,UAAM,UAAU,YAAY;AAC1B,YAAM,MAAM,MAAMG,iCAAiB,CAAA,CAAE;AACjC,UAAA,IAAI,SAAS,KAAK;AACpB,mBAAW,QAAQ,IAAI;AAAA,MACzB;AACM,YAAA,OAAO,MAAMC,eAAAA,UAAU,EAAE,IAAI,SAAS,MAAM,EAAE,EAAA,CAAG;AACnD,UAAA,KAAK,SAAS,KAAK;AACrB,cAAM,QAAQ,KAAK;AAAA,MACrB;AAAA,IAAA;AAIF,QAAI,QAAQJ,cAAAA;AACR,QAAA,MAAM,CAAC,SAAc;AACvB,aAAO,QAAQ;AACf,YAAM,QAAQ;AAAA,IAAA;AAGhB,QAAI,OAAO,MAAM;AACf,cAAQ,IAAI,KAAK;AAAA,IAAA;AAInB,UAAM,cAAcK,sBAAAA;AAChB,QAAA,KAAKL,kBAAI,EAAE;AACf,QAAI,UAAU,YAAY;AACpB,UAAA,MAAM,MAAMM,+BAAe;AAAA,QAC7B,QAAQ,2CAAa,QAAQ,KAAK;AAAA,QAClC,SAAS,MAAM,MAAM,UAAU;AAAA,QAC/B,gBAAgB,MAAM,MAAM;AAAA,QAC5B,QAAQ;AAAA,QACR,aAAa,YAAY;AAAA,QACzB,WAAW,GAAG;AAAA,QACd,cAAc,MAAM,MAAM,UAAU;AAAA,MAAA,CACrC;AACG,UAAA,IAAI,QAAQ,KAAK;AACfJ,sBAAAA,MAAA,WAAW,EAAE,KAAK,0BAA0B,SAAS,MAAM,EAAE,KAAK;AAAA,MACxE;AAAA,IAAA;AAIF,UAAM,iBAAiB,MAAM;AAC3BA,oBAAAA,MAAI,YAAY;AAAA;AAAA,QAEd,OAAO;AAAA;AAAA,QAEP,WAAW,CAAC,OAAO;AAAA,QACnB,SAAS,CAAC,QAAQ;AAEhB,gBAAM,EAAE,aAAiB,IAAA,IAAI,UAAU,CAAC;AAExC,qBAAW,YAAY;AAAA,QACzB;AAAA,MAAA,CACD;AAAA,IAAA;AAEG,UAAA,aAAa,CAAC,SAAiB;AACnCA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,QACL,MAAM;AAAA,QACN,UAAU;AAAA,QACV,SAAS,CAAC,QAAa;AACrB,aAAG,QAAQ,KAAK,MAAM,IAAI,IAAI,EAAE;AACxB,kBAAA,IAAI,GAAG,KAAK;AAAA,QACtB;AAAA,MAAA,CACD;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvJH,GAAG,WAAW,eAAe;"}